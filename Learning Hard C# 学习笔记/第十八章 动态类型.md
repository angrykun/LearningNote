## 第十八章 动态类型 ##

### 18.1 动态类型简介 ###

在C# 4.0中引入了`dynamic`关键字来定义动态类型，当我们使用由`dynamic`关键字限制的变量时，编译器并不知道它的类型，该类型只能在程序运行时才能被确定。

	dynamic i=5;

### 18.2 C#为什么引入动态类型 ###

#### 18.2.1 可以减少强制类型转换的使用 ####

因为动态类型是在程序运行时才被确定，使用它可以避免代码进行强制类型转换，从而使代码看起来更加简洁。

#### 18.2.2 调用Python等动态语言 ####

可以在C#中调用Python这样的动态语言。

### 18.3 动态类型约束 ###

动态类型的使用需要满足以下几个约束条件：

#### 18.3.1 不能用来调用扩展方法 ####

不能用动态类型作为参数来调用扩展方法。

    var numbers = Enumerable.Range(10, 10);
    dynamic number = 4;
    var error = numbers.Take(number);//编译错误

出错的原因在于：扩展方法是在另一个文件中被定义的，若参数类型为动态类型，编译器将无法确定参数的具体类型，因此也就不知道该导入哪个源文件了。

#### 18.3.2 委托与动态类型直接不能做隐式转换 ####

不能将Lambda表达式定义为动态类型，因为它们直接不存在隐式转换。

	dynamic lambdarestrict=x=>x+1;//编译错误

#### 18.3.3 不能调用构造函数和静态函数 ####

不能对动态类型调用构造函数或静态方法

	dynamic s=new dynamic();//编译错误

### 18.3.4 类型声明和泛型类型参数 ###

不能将dynamic关键字用于基类声明，也不能将dynamic用于类型参数的约束，或作为类型所实现的接口的一部分。



### 18.4 实现自己的动态行为 ###